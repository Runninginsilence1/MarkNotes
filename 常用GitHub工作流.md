# 应该叫做正确的GitHub工作流
[十分钟学会正确的github工作流，和开源作者们使用同一套流程](https://www.bilibili.com/video/BV19e4y1q7JJ/)

个人的理解是：在 一个开源项目**想要自己贡献代码的时候**，按这套流程来会有好处。

# 目录
1. 初始化开源项目到你的本地
1. 完成你对项目的更新
1. 突发状况！如果main上有新的commit该怎么办
1. 贡献完成！

# 初始化开源项目到你的本地
想要贡献代码，那么首先你得先把这个项目弄到你的电脑里面来：
通过`git clone`在你的电脑上把项目弄好；

在这里你需要知道**常见分支名的含义**：
main(master): 主分支，一般是稳定的版本，给别人fork或者clone用的；
dev: 开发分支，在该分支上完成开发（注意不是进行开发）。 如果该分支稳定会将其 merge到主分支里去。
feature: 功能分支，**实际的工作分支**，在这个分支上开发代码，如果没有问题就会考虑 merge到 dev里面去。
realese: 发行版，一般是dev的未测试版（？） 别的我也不知道了

核心思想也是： 约定大于配置

# 完成你对项目的更新
clone完项目后，根据上面分支那里的内容，如果你要添加代码，你就需要
建议一个新的 feature分支，**避免影响到主分支**
`git checkout -b 新的分支名`

说到这里要明确一个事情：
要区分： remote, local git, disk
这里重点说后面两个： disk的内容就是你直接用 ide打开就可以看到的，属于你实际的工作内容；git一般不会感知；
git就是管理你代码的东西了，当你在disk上的修改完成后，再去通知git（通过add），这是本地git的工作流程。

在add代码之前, 可以通过`git diff` 比较此时磁盘和 git所知道的代码的区别，**也就是明确一下代码具体发生了哪些变化**

再确认改好了之后， 就是add和commit那一套了。
完成后你的local git 会增加一个commit

# 突发状况！如果main上有新的commit该怎么办
你完成修改然后直接发到 remote里面然后pr等着就行了。

但是！如果在你code的时候， main的分支罕见的（？）进行了一次更新，
那么你就要考虑**你的代码可能有失效的风险**

所以你需要采取以下的流程来测试你的代码是否还有效，并做对应的修改；
1. 把远程的main分支的代码同步到你的 local git上来：`git pull origin main`, 现在你的main分支和remote的就一样了；
1. 然后你就需要看看你的代码还不能生效了： 切换到你对应的feature分支， 然后 通过`git rebase main`，让你的分支先更新main对应的变化，再去合并你修改的代码：有冲突你再去修改就行；
1. 解决冲突后，你的feature 应该就没有问题了，现在你就要考虑把你的更新提交到remote里面了： 使用`git push -f origin your-feature`**强制推送**到remote中你的分支；为什么要 --force？我个人猜测：因为远程里面的feature是没有update记录的，所以他（不知道是git还是github）会觉得你是不是可能漏了一次提交，所以需要强制push。
1. 最后，远程里面你的分支就是添加了新功能的分支了，你像 项目提交pr即可。你个人的分支其实就可以删除了：`git branch -D my-feature`

# 贡献完成！
大概就是这么个步骤。
Enjoy it!
