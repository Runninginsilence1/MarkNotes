# 从零开始一个自己的JavaWeb项目
# 任务一：熟悉GitHub的使用：创建一个远程仓库
已做另外的笔记。
# 任务二：设计一个最简单的Web页面
技术选型优先级：springboot=>spring=>servlet，如果这些都没有学习过，说明你 web 0 基础，那么请按照这个技术栈学习：hmtl=>css=>javascript=>servlet，学完servlet，即可完成。

到此我就可以算入门基础了？
现在去试试写一个最简单的页面出来先

已做另外的笔记

现在想想学 spring是不是可能和学 vue差不多？

总结一下基本的流程：
1. 有基本的环境：Tomcat 和 Servlet环境；
1. 定义好Servlet；

完

golang如果我要使用一个类似的，需要使用 gin，然后是我之前定义过的那个增删改查的那个类似的思路。

# 任务三：拥有短暂的记忆：Cookies技术
需求：在24小时内打开页面的话要应用cookie的数据（用一个bool判断应该就行）

Cookie就通过**是否存在**来判断

前端的内容忘记的差不多了；
而且不知道怎么用js去操作 cookie

用的是黑马的那个，后端，用流的方式改变页面。

**小知识**
Cookie在本地的持久化好像是 SQLite（数据库），所以不能直接查看文本。

## 任务三的改进
看了一下，我的问题就是安全性太低：只判断key；value的值过于简单；
参考 同学的解决方案。
[项目地址](https://github.com/jiangyklala/FromZerotoExpert/tree/dev)
[js代码地址](https://github.com/jiangyklala/FromZerotoExpert/blob/dev/src/main/resources/static/js/welcome.js)
是直接在前端解决的。

# 关于 Cookie的面经
1、多台浏览器登录一个账户时，只允许一个浏览器的登录态有效，这就像别人登录了你的微信，你会被击退下线。这种如何实现？

当时我的实现方法是维护维护一个表(ticket表)，每个用户都有一个唯一的 session，比如让 session 和用户 ID 进行绑定，这样的话，后面登录的人，就可以把前面登录的人的session 覆盖了。比如在浏览器A登录时，session = sessionA，在浏览器B登录成功后，会把session重置为 session=sessionB。这样的话，A就会被击退。

2、如何维护cookie有效期？就是你觉得是人为给cookie设置一个有效期好，还是浏览器关闭后让cookie自动失效好？

一般我们是建议浏览器关闭，cookie失效这种方式，并且在服务端同时维护 session 的有效期，并且会把session的有效期设置长一些，不然用户玩着玩着session过期，那就尴尬了，还得重新登录。

3、如果按照「2」这种方式，你看有些安全性比较高的网站，你几分钟没操作网页，好像你就会自动下线了，这种该怎么实现？

这种就是，即使我们开着网页，但是一小会没操作，系统会提醒你长时间没操作，给自动下线了，这种其实我们可以让前端来监听，比如设置一个全局变量来保存最后一次点击网页的时间，如果监听到用户长时间没点击，就发个消息给后端，告诉后端该用户是时候下线了。

当然，关于定时监听这个事情，其实有很多作用，不一定就是用来告诉用户下线了，像我看腾讯云这些网站，貌似一分钟就会简单一次，给后端发一次消息，还发了好几种，我也不知道是干嘛用的，只知道其中一条消息是登录态相关的。

小结：大家到时候也可以多思考相关问题，这几个只是我记得的问题，当时面试好像是被问过几次，然后被问的最后一个问题，就是单点登录问题，比如你在淘宝登录了，打开天猫时，你会发现自动登录了，这个问题当时没研究过，也就没回答好，后面我们再来研究下这个问题吧，这个是最重点的问题。

然后对于上面这几个，可能有些不大懂，那么可以当你做完登录模块之后，再来思考吧，是可以包装成项目难点的。


# 草稿区域
因为是练手的demo，而且也用了 git做了版本控制，所以
尽量把它做好看点，尽管代码本来就不是我写的...

这次的重点是表的设计，然后是把相关的功能设计出来，所以...

## 表的设计（为什么要这么设计）
1. 表的字段怎么设计？
从**需求**和**维护**上考虑
首先明确一个，这个表（用户表）的是为了进行**登录验证**的，所以其他的**描述类的消息**考虑用另外一个表进行存储。
再加上只做验证，所以可以把 行数做大一点

表的话 我参考了 gorm：
增加主键、创建时间、修改时间、删除时间，实行**软删除**，软删除的逻辑到时候实现
gorm的主键是id，是一个大数类型，我以能理解，所以用大数类型；


还有一个就是密码的处理：
csdn出的丑是最著名的一个。
使用mysql内置的加密函数，存储到 password字段，并且可以使用 char类型**提升性能。**
做登录验证就使用同样的一个函数生成字段，最后比对。

```sql
# drop table if exists `user`;
create table `user` (
    # 方便重建表
    # 主键需要用大数吗？
    id bigint auto_increment primary key,
    username varchar(50) not null,
    password char(32) not null,
    unique key username_unique (username)
) engine=innodb default charset=utf8mb4 comment='登录验证表';
```

